
<!-- invoice_form.py -->
{% extends 'base.html' %}
{% load widget_tweaks %}


{% block title %}

{% if object %}
Update invoice {{ object }}
{% else %}
Add new invoice
{% endif %}

{% endblock title %}


{% block content %}
<form method="POST">
  {% csrf_token %}

  {% for field in form %}
    <div class="form-group">
      <label>{{ field.label }}</label>
      {{ field|add_class:"form-control" }}
    </div>
  {% endfor %}

  {% if object %}
    <h4>PAIEMENTS CANTINE</h4>
    {{ payments.management_form }}
    {% for payment in payments %}
      {{ payment.id }}
      <div class="row">
        {% for field in payment.visible_fields %}
          <div class="col">{{ field|add_class:"form-control form-control-sm" }}</div>
        {% endfor %}
      </div>
    {% endfor %}
  {% endif %}

  <button class="btn btn-primary">
    {% if object %}Mettre à jour{% else %}Créer facture cantine{% endif %}
  </button>
</form>


<hr>


{% endblock content %}

{% block morejs %}
<script>
  $(".items-group").formset(
    {
      prefix: '{{ items.prefix }}',
      deleteText: "<div class='btn btn-danger btn-circle'><i class='fas fa-trash'></i></div>",
      addText: "<div class='btn btn-success btn-circle'><i class='fas fa-plus'></i></div>"
    }
  )
</script>
{% endblock morejs %}